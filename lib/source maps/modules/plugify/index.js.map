{"version":3,"sources":["modules/plugify/index.js"],"names":[],"mappings":"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","file":"modules/plugify/index.js","sourcesContent":["/**\n * This module initializes the plugins.\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _gengojsDebug = require('gengojs-debug');\n\nvar _gengojsDebug2 = _interopRequireDefault(_gengojsDebug);\n\nvar Plugify = (function () {\n  function Plugify(plugins, options, defaults) {\n    _classCallCheck(this, Plugify);\n\n    // Initialize the plugin\n    this.plugins = this.init();\n    if (!plugins) return this.plugins;else {\n      var plugs = this.plugs();\n      // Register and then restrict the plugins to one plugin\n      // per type and add defaults if none exist\n      _lodash2['default'].forEach(plugs, function (plugin) {\n        // Assert\n        this.assert(plugin);\n        var type = this.normalize(plugin['package'].type);\n        // If the default plugin already exists then remove the\n        // default and replace it with the user defined plugin\n        if (this.plugins[type].length === 1) {\n          if (!_lodash2['default'].isUndefined(defaults[type])) this.plugins[type].pop();\n        }\n        // Set the plugin attributes\n        this.setAttributes(plugin, options);\n      }, this);\n\n      (0, _gengojsDebug2['default'])('core', 'debug', 'plugins: ' + this.plugins);\n    }\n    return this.plugins;\n  }\n\n  _createClass(Plugify, [{\n    key: 'setAttributes',\n    value: function setAttributes(plugin, options) {\n      var main = plugin.main;\n      var defaults = plugin.defaults;\n      var _plugin$package = plugin['package'];\n      var name = _plugin$package.name;\n      var type = _plugin$package.type;\n\n      type = this.normalize(type);\n      // Initialize an object\n      this.plugins[type] = {};\n      // Set the plugin fn\n      this.plugins[type][name] = main;\n      // Set the package\n      this.plugins[type][name]['package'] = plugin['package'];\n      // Insert plugins as callbacks\n      this.plugins[type].push(main);\n      // Set the default options by merging with user's\n      options[type] = _lodash2['default'].defaults(options, defaults);\n    }\n\n    /* Normalizes a string */\n  }, {\n    key: 'normalize',\n    value: function normalize(str) {\n      return str.toLowerCase().replace('-', '');\n    }\n\n    // Initialize\n  }, {\n    key: 'init',\n    value: function init() {\n      return _lodash2['default'].assign({}, {\n        parsers: undefined,\n        routers: undefined,\n        backends: undefined,\n        apis: undefined,\n        headers: undefined,\n        localizes: undefined\n      });\n    }\n\n    /**\n     * plugs asserts that the plugins follows the criteria and\n     * creates an array of plugin(s)\n     * @param {object|Array|Function} plugins - The plugins to assert.\n     * @return {Array} An array of plugins\n     */\n  }, {\n    key: 'plugs',\n    value: function plugs(plugins) {\n      var plugs = [];\n      // 'plugins' is a plain object\n      if (_lodash2['default'].isPlainObject(plugins)) {\n        // A single ship exists\n        if (_lodash2['default'].has(plugins, 'main')) plugs.push(plugins);else _lodash2['default'].forOwn(plugins, function (ship) {\n          try {\n            // Assert that ship is a function\n            if (!_lodash2['default'].isFunction(ship)) throw new Error('Uh oh! The ship must be a function!');\n            if (!_lodash2['default'].isPlainObject(ship())) throw new Error('Woops! Did the ship forget to return a plain object?');\n          } catch (error) {\n            (0, _gengojsDebug2['default'])('core', 'error', error.stack || error.toString());\n          }\n          plugs.push(ship());\n        });\n      }\n      if (_lodash2['default'].isArray(plugins)) plugs = plugins;\n      if (_lodash2['default'].isFunction(plugins)) {\n        if (!_lodash2['default'].isPlainObject(plugins())) throw new Error('Woops! Did the ship forget to return a plain object?');\n        plugs.push(plugins());\n      }\n      return plugs;\n    }\n\n    /**\n     * 'assert' asserts the plugin and makes sure that the plugin\n     * is in proper fomrat.\n     * @param {object} plugin - The plugin to assert.\n     */\n  }, {\n    key: 'assert',\n    value: function assert(plugin) {\n      'use strict';\n      try {\n        if (_lodash2['default'].has(plugin, 'main')) throw new Error('Woops! Did you forget the main function?');\n        if (_lodash2['default'].has(plugin, 'package')) throw new Error('Woops! Did you forget the package?');\n        if (_lodash2['default'].has(plugin['package'], 'type')) throw new Error('Woops! Did you forget the \"type\" of plugin?');\n        if (_lodash2['default'].has(plugin['package'], 'name')) throw new Error('Woops! Did you forget the \"name\" of plugin?');\n        if (!_lodash2['default'].has(plugin['package'], 'defaults')) throw new Error('Woops! Did you forget to add \"defaults\"?');\n        if (_lodash2['default'].has(plugin, 'defaults')) throw new Error('Woops! Did you forget to add the \"defaults\"?');\n      } catch (error) {\n        (0, _gengojsDebug2['default'])('core', 'error', error.stack || error.toString());\n      }\n    }\n  }]);\n\n  return Plugify;\n})();\n\nexports['default'] = function (plugins, options, defaults) {\n  'use strict';\n  return new Plugify(plugins, options, defaults);\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=../../source maps/modules/plugify/index.js.map"],"sourceRoot":"/source/"}