{"version":3,"sources":["symbol.js"],"names":[],"mappings":"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","file":"symbol.js","sourcesContent":["'use strict';\n\nimport _ from 'lodash';\nimport 'source-map-support/register';\n\n/**\n * The class that manges symbols.\n * @class Symbol\n */\nclass Symbol {\n  constructor() {}\n    /**\n     * Returns the structure of a parsed file\n     * @param  {Array} symbols  array of symbols\n     * @param  {String} file    filename\n     * @return {Array}\n     */\n  static structure(symbols, file) {\n      return _.compact(symbols.map(function (method) {\n        if (!method.ctx || !method.ctx.name) {\n          return null;\n        }\n        return {\n          targetFile: file,\n          name: method.ctx.name,\n          type: method.ctx.type\n        };\n      })) || [];\n    }\n    /**\n     * Checks if a tag has a specific type\n     * @param  {string}  val value to check against\n     * @return {function}  A function that evaluates the truth\n     * when True if `tag` type is `val`\n     */\n  static has(val) {\n      return function (tag) {\n        return tag.type === val;\n      };\n    }\n    /**\n     * Compacts multi-line expression\n     * @return {Array}\n     */\n  static compact(tags) {\n\n    // [{\"type\":\"description\",\n    // \"string\":\"Note: if `addClass` is defined at the step level.\"},\n    //  {\"type\":\"\",\n    //  \"string\": \"The two defined `addClass` \n    //  will be taken into account in the popover\"},\n    //  {\"type\":\"type\",\"types\":[\"String\"]}]\n    var compacted = [];\n\n    tags.forEach(function (tag, i) {\n      if (!tag.type) {\n        if (i === 0) {\n          return;\n        }\n        // Append to previous\n        var prevTag = compacted[compacted.length - 1];\n        if (prevTag.description) {\n          prevTag.description += ' ' + tag.string;\n        } else {\n          prevTag.string += ' ' + tag.string;\n        }\n        return;\n      }\n\n      compacted.push(tag);\n    });\n\n    return compacted;\n  }\n\n  /**\n   * Maps symbols\n   * @private\n   * @param {Object} symbol\n   * @return {Object}\n   */\n  static map(symbol) {\n    symbol.tags = Symbol.compact(symbol.tags);\n    var tags = {};\n    ['type', 'description', 'example', 'file', 'fileoverview',\n      'overview', 'param', 'require',\n      'jsfiddle', 'jsFiddle', 'JSFiddle',\n      'return', 'returns'\n    ].forEach(tag => {\n      // Handle special cases\n      if (tag.match(/(return|returns)\\b/))\n        tags.returns = symbol.tags.filter((s) => {\n          return Symbol.has('return')(s) ||\n            Symbol.has('returns')(s);\n        });\n      else if (tag.match(/(jsfiddle|jsFiddle|JSFiddle)\\b/)) {\n        tags.jsfiddles = symbol.tags.filter((s) => {\n          return Symbol.has('jsfiddle')(s) ||\n            Symbol.has('jsFiddle')(s) ||\n            Symbol.has('JSFiddle')(s);\n        });\n      } else tags[tag.toLowerCase() + 's'] =\n        symbol.tags.filter(Symbol.has(tag));\n    });\n    var {\n      types, descriptions, examples, files, fileoverviews,\n      overviews, returns, requires, jsfiddles\n    } = tags;\n    if (symbol.tags.length > 0 &&\n      symbol.tags.filter(Symbol.has('param')).length > 0) {\n\n      symbol.hasParams = true;\n    }\n\n    if (!symbol.ctx) {\n      symbol.ctx = {};\n    }\n\n    if (symbol.ctx.type) {\n      symbol.gtype = symbol.ctx.type;\n    }\n\n    if (types.length === 1) {\n      symbol.type = types[0].types.join(' | ');\n    }\n\n    if (files.length === 1) {\n      symbol.file = files[0].type;\n      symbol.fileString = files[0].string;\n      symbol.fileHtml = files[0].html;\n    }\n\n    if (fileoverviews.length === 1) {\n      symbol.files = fileoverviews[0].type;\n      symbol.fileString = fileoverviews[0].string;\n      symbol.fileHtml = fileoverviews[0].html;\n    }\n\n    if (overviews.length === 1) {\n      symbol.files = overviews[0].type;\n      symbol.fileString = overviews[0].string;\n      symbol.fileHtml = overviews[0].html;\n    }\n\n    if (returns.length !== 0) {\n      symbol.returns = [];\n      returns.forEach(function (returned) {\n        symbol.returns.push(returned);\n      });\n    }\n\n    if (examples.length !== 0) {\n      symbol.examples = [];\n      examples.forEach(function (example) {\n        symbol.examples.push(example.string);\n      });\n    }\n\n    if (requires.length !== 0) {\n      symbol.requires = [];\n      requires.forEach(function (required) {\n        symbol.requires.push(required.string);\n      });\n    }\n\n    // No idea what this is for but it's there anyways.\n    symbol.description.extra = '';\n    if (descriptions.length === 1) {\n      symbol.description.extra = '<p>' + descriptions[0].string + '</p>';\n    }\n\n    if (jsfiddles.length === 1) {\n      symbol.jsfiddle = jsfiddles[0].string;\n    }\n\n    return symbol;\n  }\n}\n\nexport default Symbol;"],"sourceRoot":"/source/"}